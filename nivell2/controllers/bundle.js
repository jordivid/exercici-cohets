!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class o{constructor(e){this._maxpower=e}get maxpower(){return this._maxpower}}class i{constructor(e,t){this._codi=e,this._propulsors=new Array,this._curpower=0,this._posX=0,this._posY=0;for(let e of t)this._propulsors.push(new o(e))}static hasCohet(e,t){for(let n of t)if(n.codi===e)return!0;return!1}static getCohet(e,t){for(let n of t)if(n.codi===e)return n;return null}static eliminarCohet(e,t){for(let n=0;n<t.length;n++)if(t[n].codi===e){t.splice(n,1);break}this.serialitzar(t,"llista_cohets")}static serialitzar(e,t){sessionStorage.setItem(t,JSON.stringify(e))}static deserialitzar(e){let t=new Array,n=sessionStorage.getItem(e);if("string"==typeof n){let e,o=JSON.parse(n);for(e of o){let n=new Array;for(let t of e._propulsors)n.push(t._maxpower);t.push(new i(e._codi,n))}}return t}get codi(){return this._codi}get propulsors(){return this._propulsors}get curpower(){return this._curpower}get posX(){return this._posX}get posY(){return this._posY}set curpower(e){this._curpower=e}set posX(e){this._posX=e}set posY(e){this._posY=e}getMaxPower(){let e=0;for(let t of this.propulsors)e+=t.maxpower;return e}getImage(){return`rocket${this.propulsors.length}.png`}getInfo(){let e="",t=0;e+=`\n            <tr id="${this.codi}">\n            <td><button id="bt_${this.codi}" type="button" class="btn btn-sm btn-danger">X</button></td>\n            <td id="img_${this.codi}" class="p-1 d-flex flex-column align-items-center">\n                <img src="./../assets/${this.getImage()}" alt="Cohet" width="80px" height="auto">\n                <span style="font-size: 10px">${this.codi}</span>\n            </td>\n        `;for(let n of this.propulsors)t++,e+=`\n                <td class="text-center">${n.maxpower}</td>\n            `;if(t<6)for(let n=t;n<6;n++)e+="<td></td>";return e+="</tr>"}classified(e){let t="";return t+=`\n      <tr>\n      <td class="text-center"><span class="d-flex justify-content-center align-items-center" style="font-size: 30px">${e}</span></td>\n      <td id="img_${this.codi}" class="p-1 d-flex flex-column justify-content-center align-items-center">\n          <img src="./../assets/${this.getImage()}" alt="Cohet" width="80px" height="auto">\n          <span style="font-size: 10px">${this.codi}</span>\n      </td>\n      </tr>\n    `}accelerar(){const e=this.getMaxPower();let t=this.curpower;return t!==e&&((t+=i.ACC_FACTOR)>e&&(t=e),this.curpower=t,!0)}frenar(){let e=this.curpower;return 0!==e&&((e-=i.DEC_FACTOR)<0&&(e=0),this.curpower=e,!0)}aturar(){this.curpower=0}codiCohet(){return`\n            <div id="${this.codi}" style="display: inline-block; z-index: 100; position: absolute; top: -100px; left: -100px">\n                <img src="./../assets/${this.getImage()}" alt="${this.codi}">\n            </div>\n        `}}i.ACC_FACTOR=10,i.DEC_FACTOR=10;let r=new Array;function l(e){let t=document.getElementById("propellers"),n="";for(let t=1;t<=e;t++)n+=`\n            <div style="width: 100px; margin: auto" class="form-group mt-2">\n                <label for="prop${t}" class="font-weight-bold">Propulsor${t}</label>\n                <select class="form-control form-control-sm" id="prop${t}">\n                    <option value="10">10</option>\n                    <option value="20">20</option>\n                    <option value="30">30</option>\n                    <option value="40">40</option>\n                    <option value="50">50</option>\n                    <option value="60">60</option>\n                </select>\n            </div>\n        `;t.innerHTML=n}function s(){let e=document.getElementById("codi"),t=document.getElementById("prop1"),n=document.getElementById("prop2"),o=document.getElementById("prop3"),i=document.getElementById("prop4"),r=document.getElementById("prop5"),l=document.getElementById("prop6"),s=document.getElementById("errcodi");e.classList.remove("is-invalid"),s.innerHTML="",e.value="",t.value="10",null!=n&&(n.value="10"),null!=o&&(o.value="10"),null!=i&&(i.value="10"),null!=r&&(r.value="10"),null!=l&&(l.value="10")}window.addEventListener("load",e=>{var t,n,o,d,u,c,a;let m=document.getElementById("btCursa");for(let e=1;e<7;e++)null===(t=document.getElementById("rocket"+e))||void 0===t||t.addEventListener("click",function(){l(e)});if(null===(n=document.getElementById("btNuke"))||void 0===n||n.addEventListener("click",function(){!function e(){let t=document.getElementById("magatzem");let n=document.getElementById("contenidorTaula");let o=document.getElementById("granpetard");let i;console.log(r.length);r.length>0&&(r=new Array,sessionStorage.removeItem("llista_cohets"),t.innerHTML="",i=n.innerHTML,n.innerHTML="<img src='./../assets/granexplosio.png' alt='Explosió' width='50%' height='auto' style='margin-left: 25%'>",o.play(),setTimeout(function(){var t;n.innerHTML=i,null===(t=document.getElementById("btNuke"))||void 0===t||t.addEventListener("click",function(){e()})},4e3))}()}),null===(o=document.getElementById("btOK"))||void 0===o||o.addEventListener("click",function(){!function(){var e;let t,n=document.getElementById("magatzem"),o=document.getElementById("btCursa"),l=document.getElementById("voltes"),d=document.getElementById("codi"),u=d.value.trim(),c=document.getElementById("prop1"),a=document.getElementById("prop2"),m=document.getElementById("prop3"),p=document.getElementById("prop4"),g=document.getElementById("prop5"),f=document.getElementById("prop6"),h=new Array,v=document.getElementById("errcodi"),y=document.getElementById("errvoltes");if(d.classList.remove("is-invalid"),l.classList.remove("is-invalid"),v.innerHTML="",y.innerHTML="",8!=u.length)return d.classList.add("is-invalid"),void(v.innerHTML="El codi ha de tenir 8 caràcters");if(i.hasCohet(u,r))return d.classList.add("is-invalid"),void(v.innerHTML="Ja existeix un cohet amb aquest codi");h.push(Number(c.value)),null!=a&&h.push(Number(a.value));null!=m&&h.push(Number(m.value));null!=p&&h.push(Number(p.value));null!=g&&h.push(Number(g.value));null!=f&&h.push(Number(f.value));t=new i(u,h),r.push(t),n.insertAdjacentHTML("beforeend",t.getInfo()),o.disabled=!1,null===(e=document.getElementById("bt_"+t.codi))||void 0===e||e.addEventListener("click",function(){let e=document.getElementById(t.codi),n=document.getElementById("img_"+t.codi),l=document.getElementById("petard");n.innerHTML='<img src="./../assets/explosio.gif" alt="Explosió" width="80px" height="50px">',l.play(),setTimeout(function(){e.remove()},1e3),i.eliminarCohet(t.codi,r),0===r.length&&(o.disabled=!0)}),i.serialitzar(r,"llista_cohets"),s()}()}),null===(d=document.getElementById("btCancelUp"))||void 0===d||d.addEventListener("click",function(){s()}),null===(u=document.getElementById("btCancel"))||void 0===u||u.addEventListener("click",function(){s()}),null===(c=document.getElementById("btCursa"))||void 0===c||c.addEventListener("click",function(){!function(){let e,t=document.getElementById("voltes"),n=document.getElementById("errvoltes");if(t.classList.remove("is-invalid"),n.innerHTML="",!((e=Math.floor(Number(t.value)))>0)||e>20)return t.classList.add("is-invalid"),void(n.innerHTML="Introduïr entre 1 i 20 voltes");sessionStorage.setItem("voltes_cursa",e.toString()),window.open("./../views/cursa.html","_self")}()}),(r=i.deserialitzar("llista_cohets")).length>0){let e=document.getElementById("magatzem");for(let t of r)e.insertAdjacentHTML("beforeend",t.getInfo()),null===(a=document.getElementById("bt_"+t.codi))||void 0===a||a.addEventListener("click",function(){let e=document.getElementById(t.codi),n=document.getElementById("img_"+t.codi),o=document.getElementById("petard");n.innerHTML='<img src="./../assets/explosio.gif" alt="Explosió" width="80px" height="50px">',o.play(),setTimeout(function(){e.remove()},1e3),i.eliminarCohet(t.codi,r),0===r.length?m.disabled=!0:m.disabled=!1})}else m.disabled=!0})}]);